<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PODOLOGIA IZCALLI - Historia Cl√≠nica Podol√≥gica</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Montserrat:wght@600;700&display=swap" rel="stylesheet">
    
    <!-- Scripts Externos CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/signature_pad/4.1.7/signature_pad.umd.min.js"></script>
    
    <style>
        /* ESTILOS CSS - Ver archivo CSS completo en comentarios */
        :root {
            --primary-dark: #2C2C2C;
            --accent-pink: #5DF5B2;
            --light-grey: #F5F5F5;
            --medium-grey: #9E9E9E;
            --header-dark-tinto: #68D9B0;
            --header-light-tinto: #5DF5B2;
            --text-main: #333;
            --text-secondary: #555;
            --background-card: #ffffff;
            --border-color: #E0E0E0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background-color: var(--light-grey);
            color: var(--text-main);
            padding: 10px;
            line-height: 1.6;
            min-height: 100vh;
            margin: 0;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            margin: 10px auto;
            background-color: var(--background-card);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            overflow: hidden;
        }

        .main-header {
            background: linear-gradient(to right, var(--header-light-tinto), var(--header-dark-tinto));
            color: white;
            padding: 25px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }

        .main-header h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2em;
            font-weight: 700;
            color: white;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.4);
            margin: 0;
        }

        .main-header p {
            font-size: 0.95em;
            color: rgba(255, 255, 255, 0.9);
            font-style: italic;
            margin: 5px 0 0 0;
        }

        .clinic-logo-preview {
            width: 100px;
            height: 100px;
            border: 3px dashed rgba(255,255,255,0.4);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background-color: rgba(255,255,255,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .clinic-logo-preview:hover {
            border-color: var(--accent-pink);
            transform: scale(1.05);
        }

        .clinic-logo-preview.has-image {
            border: 3px solid rgba(255,255,255,0.4);
        }

        .clinic-logo-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            display: none;
        }

        .clinic-logo-preview.has-image img {
            display: block;
        }

        .placeholder-content {
            color: rgba(255,255,255,0.7);
            font-size: 0.75em;
            text-align: center;
        }

        input[type="file"] {
            display: none;
        }

        form {
            padding: 20px;
        }

        section {
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 15px;
            background-color: var(--light-grey);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border-color);
        }

        h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.5em;
            color: var(--primary-dark);
            margin: 0 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--medium-grey);
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 0.95em;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 12px 18px;
            border: 1px solid var(--border-color);
            border-radius: 25px;
            background-color: white;
            color: var(--text-main);
            font-size: 1em;
            outline: none;
            transition: all 0.3s ease;
        }

        textarea {
            min-height: 90px;
            resize: vertical;
            border-radius: 15px;
        }

        input:focus, textarea:focus, select:focus {
            border-color: var(--accent-pink);
            box-shadow: 0 0 10px rgba(216, 27, 96, 0.4);
            background-color: #FFF8FA;
        }

        .checkbox-group, .radio-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 10px;
            border: 1px solid var(--border-color);
            background-color: white;
            padding: 15px;
            border-radius: 15px;
        }

        .checkbox-group label, .radio-group label {
            display: flex;
            align-items: center;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 0.9em;
        }

        .checkbox-group input[type="checkbox"],
        .radio-group input[type="radio"] {
            margin-right: 10px;
            width: 20px;
            height: 20px;
            -webkit-appearance: none;
            appearance: none;
            border: 2px solid var(--medium-grey);
            border-radius: 50%;
            background-color: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .checkbox-group input[type="checkbox"]:checked,
        .radio-group input[type="radio"]:checked {
            background-color: var(--accent-pink);
            border-color: var(--accent-pink);
            box-shadow: 0 0 0 4px rgba(216, 27, 96, 0.2);
        }

        .other-input {
            display: none;
            margin-top: 10px;
            border-radius: 15px;
        }

        .stress-slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 10px;
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 15px;
            padding: 10px 20px;
        }

        #stressLevel {
            flex-grow: 1;
            height: 10px;
        }

        .stress-value {
            font-size: 1.1em;
            font-weight: bold;
            color: var(--primary-dark);
            min-width: 25px;
            text-align: center;
        }

        .image-upload-area {
            border: 2px dashed var(--medium-grey);
            background-color: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            margin-top: 15px;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .image-upload-area:hover {
            border-color: var(--accent-pink);
        }

        .image-upload-area.has-image {
            border: 2px solid var(--border-color);
        }

        .uploaded-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            display: none;
        }

        .image-upload-area.has-image .uploaded-image {
            display: block;
        }

        .image-upload-area.has-image .upload-placeholder {
            display: none;
        }

        .clinical-images-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .signature-pad-container {
            margin-top: 20px;
            border: 2px solid var(--accent-pink);
            border-radius: 15px;
            overflow: hidden;
        }

        .signature-canvas {
            width: 100%;
            height: 150px;
            background-color: white;
            touch-action: none;
            display: block;
        }

        .signature-buttons {
            display: flex;
            justify-content: flex-end;
            padding: 8px;
            gap: 10px;
            background-color: var(--light-grey);
        }

        .signature-buttons button {
            background-color: var(--medium-grey);
            color: white;
            padding: 6px 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85em;
        }

        .signature-buttons button:hover {
            background-color: var(--primary-dark);
        }

        .button-group {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            flex-wrap: wrap;
        }

        .button-group button {
            padding: 15px 30px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            text-transform: uppercase;
        }

        .report-btn {
            background: linear-gradient(to right, var(--primary-dark), var(--accent-pink));
            color: white;
        }

        .report-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }

        .reset-btn {
            background-color: var(--medium-grey);
            color: white;
        }

        .reset-btn:hover {
            background-color: #757575;
        }

        #reportContainer {
            margin-top: 40px;
            display: none;
            padding: 30px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }

        .loading-spinner {
            border: 5px solid var(--light-grey);
            border-top: 5px solid var(--accent-pink);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .main-header {
                flex-direction: column;
                align-items: flex-start;
            }
            .main-header h1 {
                font-size: 2em;
            }
            .grid-container {
                grid-template-columns: 1fr;
            }
            .button-group {
                flex-direction: column;
            }
            .button-group button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <div class="container">
        <header class="main-header">
            <div class="main-header-content">
                <h1>ü¶∂ PODOLOGIA IZCALLI</h1>
                <p>Historia Cl√≠nica Podol√≥gica Digital</p>
            </div>
            <div class="header-logo-area">
                <div class="clinic-logo-preview" id="clinicLogoPreview" onclick="document.getElementById('clinicLogoInput').click();">
                    <div class="placeholder-content">
                        <span>üì∑</span>
                        <span>Tu logotipo</span>
                    </div>
                    <img id="clinicLogoImg" alt="Logo Cl√≠nica">
                </div>
                <input type="file" id="clinicLogoInput" accept="image/*">
            </div>
        </header>

        <form id="podiatryForm">
            <section>
                <h2>üë®‚Äç‚öïÔ∏è Informaci√≥n del Especialista</h2>
                <div class="grid-container">
                    <div class="form-group">
                        <label for="specialistName">Nombre del Especialista:</label>
                        <input type="text" id="specialistName" name="specialistName" required>
                    </div>
                    <div class="form-group">
                        <label for="specialty">Especialidad:</label>
                        <select id="specialty" name="specialty" required>
                            <option value="">Seleccione</option>
                            <option value="Pod√≥logo" selected>Pod√≥logo</option>
                            <option value="M√©dico General">M√©dico General</option>
                            <option value="Enfermero">Enfermero</option>
                            <option value="Cirujano Vascular">Cirujano Vascular</option>
                            <option value="Endocrin√≥logo">Endocrin√≥logo</option>
                            <option value="Otro">Otro</option>
                        </select>
                        <input type="text" id="otherSpecialty" class="other-input" placeholder="Especificar otra especialidad">
                    </div>
                    <div class="form-group">
                        <label for="clinicName">Cl√≠nica / Centro de Salud:</label>
                        <input type="text" id="clinicName" name="clinicName" required>
                    </div>
                    <div class="form-group">
                        <label for="clinicPhone">Tel√©fono de Contacto:</label>
                        <input type="tel" id="clinicPhone" name="clinicPhone">
                    </div>
                    <div class="form-group">
                        <label for="clinicEmail">Correo de Contacto:</label>
                        <input type="email" id="clinicEmail" name="clinicEmail">
                    </div>
                    <div class="form-group">
                        <label for="assessmentDate">Fecha de Valoraci√≥n:</label>
                        <input type="date" id="assessmentDate" name="assessmentDate" required>
                    </div>
                </div>
            </section>

            <section>
                <h2>üë§ Datos del Paciente</h2>
                <div class="grid-container">
                    <div class="form-group">
                        <label for="patientName">Nombre Completo:</label>
                        <input type="text" id="patientName" name="patientName" required>
                    </div>
                    <div class="form-group">
                        <label for="patientAge">Edad:</label>
                        <input type="number" id="patientAge" name="patientAge" min="0" required>
                    </div>
                    <div class="form-group">
                        <label>Sexo:</label>
                        <div class="radio-group">
                            <label>
                                <input type="radio" name="patientSex" value="Masculino" required>
                                Masculino
                            </label>
                            <label>
                                <input type="radio" name="patientSex" value="Femenino">
                                Femenino
                            </label>
                            <label>
                                <input type="radio" name="patientSex" value="Otro">
                                Otro
                            </label>
                        </div>
                        <input type="text" id="otherPatientSex" class="other-input" placeholder="Especificar">
                    </div>
                    <div class="form-group">
                        <label for="patientPhone">Tel√©fono:</label>
                        <input type="tel" id="patientPhone" name="patientPhone">
                    </div>
                    <div class="form-group">
                        <label for="patientAddress">Domicilio:</label>
                        <input type="text" id="patientAddress" name="patientAddress">
                    </div>
                    <div class="form-group">
                        <label for="patientOccupation">Ocupaci√≥n:</label>
                        <input type="text" id="patientOccupation" name="patientOccupation">
                    </div>
                </div>
            </section>

            <section>
                <h2>üìã Antecedentes Podol√≥gicos y M√©dicos</h2>
                <div class="form-group">
                    <label>Condiciones Relevantes:</label>
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" name="podiatricHistory" value="Diabetes Mellitus">
                            Diabetes Mellitus
                        </label>
                        <label>
                            <input type="checkbox" name="podiatricHistory" value="Hipertensi√≥n arterial">
                            Hipertensi√≥n arterial
                        </label>
                        <label>
                            <input type="checkbox" name="podiatricHistory" value="Problemas vasculares">
                            Problemas vasculares
                        </label>
                        <label>
                            <input type="checkbox" name="podiatricHistory" value="Pie plano / pie cavo">
                            Pie plano / pie cavo
                        </label>
                        <label>
                            <input type="checkbox" name="podiatricHistory" value="Onicomicosis">
                            Antecedentes de onicomicosis
                        </label>
                        <label>
                            <input type="checkbox" name="podiatricHistory" value="Cirug√≠as previas">
                            Cirug√≠as previas podol√≥gicas
                        </label>
                        <label>
                            <input type="checkbox" name="podiatricHistory" value="Otros">
                            Otros
                        </label>
                    </div>
                    <input type="text" id="otherMedicalHistory" class="other-input" placeholder="Especificar otros antecedentes">
                </div>

                <div class="form-group">
                    <label for="currentTreatment">Tratamiento m√©dico actual:</label>
                    <select id="currentTreatment" name="currentTreatment">
                        <option value="">Seleccione</option>
                        <option value="Insulina">Insulina</option>
                        <option value="Hipoglucemiantes Orales">Hipoglucemiantes Orales</option>
                        <option value="Dieta y Ejercicio">Dieta y Ejercicio</option>
                        <option value="F√°rmacos Vasculares">F√°rmacos Vasculares</option>
                        <option value="Otro">Otro</option>
                    </select>
                    <input type="text" id="otherCurrentTreatment" class="other-input" placeholder="Especificar otro tratamiento">
                </div>
            </section>

            <section>
                <h2>üèÉ Estilo de Vida y H√°bitos</h2>
                <div class="form-group">
                    <label>Actividad f√≠sica:</label>
                    <div class="radio-group">
                        <label>
                            <input type="radio" name="physicalActivity" value="Sedentario">
                            Sedentario
                        </label>
                        <label>
                            <input type="radio" name="physicalActivity" value="Leve">
                            Leve
                        </label>
                        <label>
                            <input type="radio" name="physicalActivity" value="Moderada">
                            Moderada
                        </label>
                        <label>
                            <input type="radio" name="physicalActivity" value="Intensa">
                            Intensa
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="usualFootwear">Tipo de calzado habitual:</label>
                    <select id="usualFootwear" name="usualFootwear">
                        <option value="">Seleccione</option>
                        <option value="Deportivo">Deportivo</option>
                        <option value="Casual">Casual (Cerrado)</option>
                        <option value="Formal">Formal</option>
                        <option value="Sandalias">Sandalias / Abierto</option>
                        <option value="Ortop√©dico">Ortop√©dico / Especial</option>
                        <option value="Otro">Otro</option>
                    </select>
                    <input type="text" id="otherFootwear" class="other-input" placeholder="Especificar otro tipo de calzado">
                </div>
                <div class="form-group">
                    <label for="dailyWalkFrequency">Frecuencia de caminata:</label>
                    <input type="text" id="dailyWalkFrequency" name="dailyWalkFrequency" placeholder="Ej. 30 minutos al d√≠a">
                </div>
                <div class="form-group">
                    <label>H√°bitos t√≥xicos:</label>
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" name="toxicologicalHabits" value="Tabaquismo">
                            Tabaquismo
                        </label>
                        <label>
                            <input type="checkbox" name="toxicologicalHabits" value="Alcohol">
                            Alcohol
                        </label>
                        <label>
                            <input type="checkbox" name="toxicologicalHabits" value="Otros">
                            Otros (drogas)
                        </label>
                        <label>
                            <input type="checkbox" name="toxicologicalHabits" value="Ninguno">
                            Ninguno
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="stressLevel">Nivel de estr√©s percibido (1-10):</label>
                    <div class="stress-slider-container">
                        <input type="range" id="stressLevel" name="stressLevel" min="1" max="10" value="5">
                        <span id="stressValue" class="stress-value">5</span>
                    </div>
                </div>
            </section>

            <section>
                <h2>ü¶∂ Exploraci√≥n Cl√≠nica Podol√≥gica</h2>
                <div class="grid-container">
                    <div class="form-group">
                        <label>U√±as:</label>
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" name="nailEvaluation" value="Sanas">
                                Sanas
                            </label>
                            <label>
                                <input type="checkbox" name="nailEvaluation" value="Onicomicosis">
                                Onicomicosis
                            </label>
                            <label>
                                <input type="checkbox" name="nailEvaluation" value="Onicogrifosis">
                                Onicogrifosis
                            </label>
                            <label>
                                <input type="checkbox" name="nailEvaluation" value="Onicocriptosis">
                                Onicocriptosis (U√±a encarnada)
                            </label>
                            <label>
                                <input type="checkbox" name="nailEvaluation" value="Otros">
                                Otros
                            </label>
                        </div>
                        <input type="text" id="otherNailEvaluation" class="other-input" placeholder="Especificar otra condici√≥n de u√±as">
                    </div>
                    <div class="form-group">
                        <label>Piel y Tegumentos:</label>
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" name="skinEvaluation" value="Sana">
                                Sana
                            </label>
                            <label>
                                <input type="checkbox" name="skinEvaluation" value="Hiperqueratosis">
                                Hiperqueratosis (Callosidad)
                            </label>
                            <label>
                                <input type="checkbox" name="skinEvaluation" value="Maceraci√≥n">
                                Maceraci√≥n interdigital
                            </label>
                            <label>
                                <input type="checkbox" name="skinEvaluation" value="Verrugas">
                                Verrugas plantares
                            </label>
                            <label>
                                <input type="checkbox" name="skinEvaluation" value="Grietas">
                                Grietas/Fisuras
                            </label>
                            <label>
                                <input type="checkbox" name="skinEvaluation" value="Heridas">
                                Heridas/√ölceras
                            </label>
                            <label>
                                <input type="checkbox" name="skinEvaluation" value="Otros">
                                Otros
                            </label>
                        </div>
                        <input type="text" id="otherSkinEvaluation" class="other-input" placeholder="Especificar otra condici√≥n de piel">
                    </div>
                </div>

                <div class="grid-container">
                    <div class="form-group">
                        <label for="gaitEvaluation">Marcha y Postura:</label>
                        <select id="gaitEvaluation" name="gaitEvaluation">
                            <option value="Normal">Normal</option>
                            <option value="Pronadora">Pronadora</option>
                            <option value="Supinadora">Supinadora</option>
                            <option value="Claudicaci√≥n">Claudicaci√≥n</option>
                            <option value="Marcha Ant√°lgica">Marcha Ant√°lgica</option>
                            <option value="Otro">Otro</option>
                        </select>
                        <input type="text" id="otherGaitEvaluation" class="other-input" placeholder="Especificar otra anomal√≠a en la marcha">
                    </div>
                    <div class="form-group">
                        <label for="vascularPulses">Exploraci√≥n Vascular (Pulsos):</label>
                        <select id="vascularPulses" name="vascularPulses">
                            <option value="Normal">Normal</option>
                            <option value="Disminuidos">Disminuidos</option>
                            <option value="Ausentes">Ausentes</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="capillaryRefill">Llenado Capilar:</label>
                        <select id="capillaryRefill" name="capillaryRefill">
                            <option value="Normal (< 2 seg)">Normal (&lt; 2 seg)</option>
                            <option value="Retardado (2-3 seg)">Retardado (2-3 seg)</option>
                            <option value="Muy Retardado (> 3 seg)">Muy Retardado (&gt; 3 seg)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="footTemperature">Temperatura del Pie:</label>
                        <select id="footTemperature" name="footTemperature">
                            <option value="Normal">Normal</option>
                            <option value="Caliente">Caliente (Signo de inflamaci√≥n)</option>
                            <option value="Fr√≠o">Fr√≠o (Signo de isquemia)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="neurologicalEvaluation">Exploraci√≥n Neurol√≥gica B√°sica:</label>
                        <select id="neurologicalEvaluation" name="neurologicalEvaluation">
                            <option value="Sensibilidad Conservada">Sensibilidad Conservada</option>
                            <option value="Disminuci√≥n Sensibilidad">Disminuci√≥n Sensibilidad</option>
                            <option value="Ausencia Sensibilidad">Ausencia Sensibilidad</option>
                            <option value="Otro">Otro</option>
                        </select>
                        <input type="text" id="otherNeurologicalEvaluation" class="other-input" placeholder="Especificar otro hallazgo neurol√≥gico">
                    </div>
                    <div class="form-group">
                        <label for="affectedSide">Lado(s) Afectado(s):</label>
                        <select id="affectedSide" name="affectedSide">
                            <option value="N/A">N/A</option>
                            <option value="Pie Izquierdo">Pie Izquierdo</option>
                            <option value="Pie Derecho">Pie Derecho</option>
                            <option value="Ambos Pies">Ambos Pies</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="clinicalObservations">Observaciones Adicionales:</label>
                    <textarea id="clinicalObservations" name="clinicalObservations" placeholder="Describa aqu√≠ hallazgos no contemplados, deformidades o el √°rea principal de la lesi√≥n."></textarea>
                </div>
            </section>

            <section>
                <h2>üíä Plan de Tratamiento Sugerido</h2>
                <div class="form-group">
                    <label for="hygieneIndications">Indicaciones de Higiene del pie:</label>
                    <textarea id="hygieneIndications" name="hygieneIndications" placeholder="Ej. Lavar diariamente con jab√≥n neutro, secar meticulosamente entre los dedos..."></textarea>
                </div>
                <div class="form-group">
                    <label for="nailCare">Corte y Cuidado de U√±as:</label>
                    <textarea id="nailCare" name="nailCare" placeholder="Ej. Corte recto, no redondear esquinas. Limar si hay onicogrifosis."></textarea>
                </div>
                <div class="form-group">
                    <label for="antifungalTreatments">Tratamientos Antimic√≥ticos (Si Aplica):</label>
                    <textarea id="antifungalTreatments" name="antifungalTreatments" placeholder="Ej. Aplicar laca/crema fungicida en u√±as afectadas..."></textarea>
                </div>
                <div class="form-group">
                    <label for="orthoticsIndications">√ìrtesis Plantares / Calzado Especial:</label>
                    <textarea id="orthoticsIndications" name="orthoticsIndications" placeholder="Ej. Evaluar plantillas de descarga a medida, calzado de horma ancha..."></textarea>
                </div>
                <div class="form-group">
                    <label for="podiatricFollowUp">Seguimiento Podol√≥gico:</label>
                    <textarea id="podiatricFollowUp" name="podiatricFollowUp" placeholder="Ej. Revaloraci√≥n en 15 d√≠as para quiropodia, seguimiento trimestral."></textarea>
                </div>
            </section>

            <section>
                <h2>üì∑ Fotograf√≠a Cl√≠nica</h2>
                <div class="clinical-images-grid">
                    <div class="form-group">
                        <label for="footImageInput1">Imagen 1: Vista General</label>
                        <div class="image-upload-area" id="footImageUploadArea1" onclick="document.getElementById('footImageInput1').click();">
                            <div class="upload-placeholder" id="footImagePlaceholder1">
                                <span style="font-size: 2em;">üì∑</span>
                                <span class="upload-text">Haga clic para subir imagen</span>
                            </div>
                            <img class="uploaded-image" id="uploadedFootImage1" alt="Imagen Cl√≠nica 1">
                            <input type="file" id="footImageInput1" name="footImage1" accept="image/*">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="footImageInput2">Imagen 2: Detalle</label>
                        <div class="image-upload-area" id="footImageUploadArea2" onclick="document.getElementById('footImageInput2').click();">
                            <div class="upload-placeholder" id="footImagePlaceholder2">
                                <span style="font-size: 2em;">üì∑</span>
                                <span class="upload-text">Haga clic para subir imagen</span>
                            </div>
                            <img class="uploaded-image" id="uploadedFootImage2" alt="Imagen Cl√≠nica 2">
                            <input type="file" id="footImageInput2" name="footImage2" accept="image/*">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="footImageInput3">Imagen 3: Adicional</label>
                        <div class="image-upload-area" id="footImageUploadArea3" onclick="document.getElementById('footImageInput3').click();">
                            <div class="upload-placeholder" id="footImagePlaceholder3">
                                <span style="font-size: 2em;">üì∑</span>
                                <span class="upload-text">Haga clic para subir imagen</span>
                            </div>
                            <img class="uploaded-image" id="uploadedFootImage3" alt="Imagen Cl√≠nica 3">
                            <input type="file" id="footImageInput3" name="footImage3" accept="image/*">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="imageObservations">Comentarios sobre las fotograf√≠as:</label>
                    <textarea id="imageObservations" name="imageObservations" placeholder="Ej. Vista dorsal del pie izquierdo, se observa onicomicosis en el primer dedo..."></textarea>
                </div>
            </section>

            <section>
                <h2>‚úçÔ∏è Consentimiento Informado</h2>
                <div class="form-group">
                    <textarea id="consentText" name="consentText" style="font-weight: 700; line-height: 2;">Otorgo mi consentimiento para la valoraci√≥n, diagn√≥stico y tratamiento podol√≥gico por parte del profesional sanitario.
Entiendo que el proceso incluye la exploraci√≥n de mis pies y la toma de fotograf√≠as cl√≠nicas, las cuales se usar√°n para mi expediente y seguimiento.
He recibido explicaciones sobre mi condici√≥n y el plan de tratamiento sugerido, y mis dudas han sido resueltas. Acepto los riesgos y beneficios de los procedimientos.</textarea>
                    <label style="margin-top: 15px; display: flex; align-items: center;">
                        <input type="checkbox" id="consent" name="consent" required style="margin-right: 10px;">
                        He le√≠do y acepto el consentimiento informado.
                    </label>
                </div>
            </section>

            <section>
                <h2>‚úçÔ∏è Firmas de Conformidad</h2>
                <div class="grid-container">
                    <div class="form-group">
                        <label>Firma del paciente o responsable:</label>
                        <div class="signature-pad-container">
                            <canvas id="patientSignatureCanvas" class="signature-canvas" width="380" height="150"></canvas>
                            <div class="signature-buttons">
                                <button type="button" onclick="clearSignature('patient')">Limpiar</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Firma del profesional tratante:</label>
                        <div class="signature-pad-container">
                            <canvas id="professionalSignatureCanvas" class="signature-canvas" width="380" height="150"></canvas>
                            <div class="signature-buttons">
                                <button type="button" onclick="clearSignature('professional')">Limpiar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <div class="button-group">
                <button type="button" class="report-btn" onclick="generateReport()">Generar Reporte Cl√≠nico Podol√≥gico</button>
                <button type="reset" class="reset-btn">Reiniciar Formulario</button>
            </div>
        </form>

        <div id="reportContainer"></div>
    </div>

    <script>
        // Variables globales para Signature Pads
        let patientSignaturePad;
        let professionalSignaturePad;

        // Inicializaci√≥n cuando el DOM est√° listo
        document.addEventListener('DOMContentLoaded', function() {
            // Establecer fecha actual
            const today = new Date();
            const dateString = today.toISOString().split('T')[0];
            document.getElementById('assessmentDate').value = dateString;

            // Inicializar Signature Pads
            initializeSignaturePads();

            // Stress Level Slider
            const stressLevel = document.getElementById('stressLevel');
            const stressValue = document.getElementById('stressValue');
            stressLevel.oninput = function() {
                stressValue.textContent = this.value;
            };

            // Event listeners para campos "Otro"
            setupOtherFieldListeners();

            // Event listeners para carga de im√°genes
            setupImageUploadListeners();

            // Clinic Logo Upload
            setupClinicLogoUpload();
        });

        // Inicializar Signature Pads
        function initializeSignaturePads() {
            const patientCanvas = document.getElementById('patientSignatureCanvas');
            const professionalCanvas = document.getElementById('professionalSignatureCanvas');
            
            // Ajustar canvas para pantallas de alta resoluci√≥n
            function resizeCanvas(canvas) {
                const ratio = Math.max(window.devicePixelRatio || 1, 1);
                canvas.width = canvas.offsetWidth * ratio;
                canvas.height = canvas.offsetHeight * ratio;
                canvas.getContext('2d').scale(ratio, ratio);
            }
            
            resizeCanvas(patientCanvas);
            resizeCanvas(professionalCanvas);

            patientSignaturePad = new SignaturePad(patientCanvas, {
                backgroundColor: 'rgb(255, 255, 255)',
                penColor: 'rgb(0, 0, 0)'
            });

            professionalSignaturePad = new SignaturePad(professionalCanvas, {
                backgroundColor: 'rgb(255, 255, 255)',
                penColor: 'rgb(0, 0, 0)'
            });

            window.addEventListener('resize', () => {
                resizeCanvas(patientCanvas);
                resizeCanvas(professionalCanvas);
            });
        }

        // Limpiar firma
        function clearSignature(type) {
            if (type === 'patient') {
                patientSignaturePad.clear();
            } else if (type === 'professional') {
                professionalSignaturePad.clear();
            }
        }

        // Configurar listeners para campos "Otro"
        function setupOtherFieldListeners() {
            // Select fields
            const selectMappings = {
                'specialty': 'otherSpecialty',
                'currentTreatment': 'otherCurrentTreatment',
                'usualFootwear': 'otherFootwear',
                'gaitEvaluation': 'otherGaitEvaluation',
                'neurologicalEvaluation': 'otherNeurologicalEvaluation'
            };

            Object.keys(selectMappings).forEach(selectId => {
                const select = document.getElementById(selectId);
                const otherInput = document.getElementById(selectMappings[selectId]);
                
                if (select && otherInput) {
                    select.addEventListener('change', function() {
                        if (this.value === 'Otro') {
                            otherInput.style.display = 'block';
                        } else {
                            otherInput.style.display = 'none';
                            otherInput.value = '';
                        }
                    });
                }
            });

            // Radio buttons
            const radios = document.querySelectorAll('input[name="patientSex"]');
            radios.forEach(radio => {
                radio.addEventListener('change', function() {
                    const otherInput = document.getElementById('otherPatientSex');
                    if (this.value === 'Otro' && this.checked) {
                        otherInput.style.display = 'block';
                    } else {
                        otherInput.style.display = 'none';
                        otherInput.value = '';
                    }
                });
            });

            // Checkboxes
            const checkboxMappings = {
                'podiatricHistory': ['otherMedicalHistory'],
                'nailEvaluation': ['otherNailEvaluation'],
                'skinEvaluation': ['otherSkinEvaluation']
            };

            Object.keys(checkboxMappings).forEach(groupName => {
                const checkboxes = document.querySelectorAll(`input[name="${groupName}"]`);
                checkboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', function() {
                        if (this.value === 'Otros' || this.value.includes('Otro')) {
                            const otherInputs = checkboxMappings[groupName];
                            otherInputs.forEach(inputId => {
                                const input = document.getElementById(inputId);
                                if (input) {
                                    if (this.checked) {
                                        input.style.display = 'block';
                                    } else {
                                        input.style.display = 'none';
                                        input.value = '';
                                    }
                                }
                            });
                        }
                    });
                });
            });
        }

        // Configurar listeners para carga de im√°genes
        function setupImageUploadListeners() {
            for (let i = 1; i <= 3; i++) {
                const input = document.getElementById(`footImageInput${i}`);
                if (input) {
                    input.addEventListener('change', function(event) {
                        handleImageUpload(event, i);
                    });
                }
            }
        }

        // Manejar carga de imagen
        function handleImageUpload(event, index) {
            const file = event.target.files[0];
            const uploadArea = document.getElementById(`footImageUploadArea${index}`);
            const img = document.getElementById(`uploadedFootImage${index}`);
            const placeholder = document.getElementById(`footImagePlaceholder${index}`);

            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    img.src = e.target.result;
                    uploadArea.classList.add('has-image');
                };
                reader.readAsDataURL(file);
            } else {
                img.src = '';
                uploadArea.classList.remove('has-image');
            }
        }

        // Configurar carga de logo de cl√≠nica
        function setupClinicLogoUpload() {
            const input = document.getElementById('clinicLogoInput');
            const preview = document.getElementById('clinicLogoPreview');
            const img = document.getElementById('clinicLogoImg');

            if (input) {
                input.addEventListener('change', function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            img.src = e.target.result;
                            preview.classList.add('has-image');
                        };
                        reader.readAsDataURL(file);
                    } else {
                        img.src = '';
                        preview.classList.remove('has-image');
                    }
                });
            }
        }

        // Recopilar datos del formulario
        function collectFormData() {
            const data = {};
            const form = document.getElementById('podiatryForm');

            // Recopilar inputs de texto, email, tel, date, number, textarea, select
            form.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"], input[type="date"], input[type="number"], textarea, select').forEach(input => {
                if (input.name && input.type !== 'file') {
                    data[input.name] = input.value;
                }
            });

            // Recopilar checkboxes
            const checkboxGroups = ['podiatricHistory', 'toxicologicalHabits', 'nailEvaluation', 'skinEvaluation'];
            checkboxGroups.forEach(group => {
                const checked = Array.from(document.querySelectorAll(`input[name="${group}"]:checked`)).map(cb => cb.value);
                data[group] = checked;
            });

            // Recopilar radios
            const radioGroups = ['patientSex', 'physicalActivity'];
            radioGroups.forEach(group => {
                const checked = document.querySelector(`input[name="${group}"]:checked`);
                data[group] = checked ? checked.value : '';
            });

            // Agregar campos "Otro" visibles
            document.querySelectorAll('.other-input').forEach(input => {
                if (input.style.display !== 'none' && input.value.trim() !== '') {
                    const baseFieldName = input.id.replace('other', '').replace(/([A-Z])/g, ' $1').trim();
                    data[input.id] = input.value;
                }
            });

            // Agregar estado del consentimiento
            data.consent = document.getElementById('consent').checked;

            return data;
        }

        // Formatear valores de checkbox para el reporte
        function formatCheckboxValues(values) {
            if (!values || values.length === 0) {
                return 'Ninguno/Normal';
            }
            return Array.isArray(values) ? values.join(', ') : values;
        }

        // Validar formulario antes de generar reporte
        function validateForm() {
            const requiredFields = [
                { id: 'specialistName', label: 'Nombre del Especialista' },
                { id: 'clinicName', label: 'Nombre de la Cl√≠nica' },
                { id: 'assessmentDate', label: 'Fecha de Valoraci√≥n' },
                { id: 'patientName', label: 'Nombre del Paciente' },
                { id: 'patientAge', label: 'Edad del Paciente' }
            ];

            let isValid = true;
            let errorMessage = 'Por favor complete los siguientes campos obligatorios:\n\n';

            requiredFields.forEach(field => {
                const element = document.getElementById(field.id);
                if (!element.value.trim()) {
                    isValid = false;
                    errorMessage += `‚Ä¢ ${field.label}\n`;
                    element.style.borderColor = '#dc3545';
                } else {
                    element.style.borderColor = '';
                }
            });

            // Validar que se haya seleccionado un sexo
            const sexSelected = document.querySelector('input[name="patientSex"]:checked');
            if (!sexSelected) {
                isValid = false;
                errorMessage += '‚Ä¢ Sexo del Paciente\n';
            }

            // Validar consentimiento
            if (!document.getElementById('consent').checked) {
                isValid = false;
                errorMessage += '‚Ä¢ Debe aceptar el consentimiento informado\n';
            }

            if (!isValid) {
                alert(errorMessage);
            }

            return isValid;
        }

        // Generar reporte
        function generateReport() {
            // Validar formulario
            if (!validateForm()) {
                return;
            }

            // Mostrar loading
            document.getElementById('loadingOverlay').style.display = 'flex';

            // Recopilar datos
            const data = collectFormData();

            // Preparar im√°genes
            const clinicLogoSrc = document.getElementById('clinicLogoImg').src;
            const footImages = [1, 2, 3].map(i => ({
                src: document.getElementById(`uploadedFootImage${i}`).src,
                area: document.getElementById(`footImageUploadArea${i}`)
            }));

            // Generar HTML del reporte
            let reportHTML = generateReportHTML(data, clinicLogoSrc, footImages);

            // Mostrar reporte
            const reportContainer = document.getElementById('reportContainer');
            reportContainer.innerHTML = `<div id="reportContent">${reportHTML}</div>`;
            reportContainer.style.display = 'block';

            // Scroll al reporte
            reportContainer.scrollIntoView({ behavior: 'smooth' });

            // Generar imagen del reporte
            setTimeout(() => {
                const reportContent = document.getElementById('reportContent');
                html2canvas(reportContent, {
                    scale: 2,
                    useCORS: true,
                    allowTaint: true,
                    logging: false
                }).then(canvas => {
                    const imgData = canvas.toDataURL('image/png');
                    
                    reportContainer.innerHTML = `
                        <div style="text-align: center; padding: 30px;">
                            <h2 style="color: var(--accent-pink); margin-bottom: 20px;">‚úÖ Reporte Generado Exitosamente</h2>
                            <img src="${imgData}" style="max-width: 100%; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.15); margin-bottom: 20px;" alt="Reporte Podol√≥gico">
                            <a href="${imgData}" download="Reporte_PodologiAPP_${data.patientName.replace(/\s+/g, '_')}.png" style="display: inline-block; padding: 15px 30px; background: linear-gradient(to right, var(--primary-dark), var(--accent-pink)); color: white; text-decoration: none; border-radius: 30px; font-weight: bold; margin: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.2);">
                                üì• Descargar Reporte (PNG)
                            </a>
                            <button onclick="window.print()" style="padding: 15px 30px; background: var(--medium-grey); color: white; border: none; border-radius: 30px; font-weight: bold; cursor: pointer; margin: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.2);">
                                üñ®Ô∏è Imprimir Reporte
                            </button>
                        </div>
                    `;

                    // Ocultar loading
                    document.getElementById('loadingOverlay').style.display = 'none';
                }).catch(error => {
                    console.error('Error al generar la imagen del reporte:', error);
                    document.getElementById('loadingOverlay').style.display = 'none';
                    alert('Error al generar el reporte. Por favor, intente nuevamente.');
                });
            }, 500);
        }

        // Generar HTML del reporte
        function generateReportHTML(data, logoSrc, footImages) {
            let imagesHTML = '';
            footImages.forEach(img => {
                if (img.area.classList.contains('has-image') && img.src) {
                    imagesHTML += `
                        <div style="width: 250px; height: 250px; border: 2px solid var(--medium-grey); border-radius: 10px; overflow: hidden; display: flex; align-items: center; justify-content: center; margin: 10px;">
                            <img src="${img.src}" style="max-width: 100%; max-height: 100%; object-fit: contain;" alt="Imagen Cl√≠nica">
                        </div>
                    `;
                }
            });

            if (!imagesHTML) {
                imagesHTML = '<p style="color: var(--medium-grey); text-align: center; padding: 20px; border: 1px dashed var(--medium-grey); border-radius: 10px;">No se adjuntaron im√°genes cl√≠nicas.</p>';
            }

            const logoHTML = (logoSrc && document.getElementById('clinicLogoPreview').classList.contains('has-image')) 
                ? `<img src="${logoSrc}" style="width: 80px; height: 80px; object-fit: contain; margin-right: 15px;" alt="Logo Cl√≠nica">`
                : '';

            return `
                <div style="padding: 30px; font-family: 'Inter', sans-serif; color: #333; background: white;">
                    <!-- Header -->
                    <div style="display: flex; align-items: center; padding-bottom: 20px; border-bottom: 3px solid #2C2C2C; margin-bottom: 30px;">
                        ${logoHTML}
                        <div>
                            <h3 style="margin: 0; font-size: 1.8em; color: #2C2C2C; font-family: 'Montserrat', sans-serif;">${data.clinicName || 'Cl√≠nica Podol√≥gica'}</h3>
                            <p style="margin: 5px 0; font-size: 0.9em; color: #555;"><strong>Especialista:</strong> ${data.specialistName || 'N/A'}</p>
                            <p style="margin: 5px 0; font-size: 0.9em; color: #555;"><strong>Especialidad:</strong> ${data.specialty || 'N/A'}</p>
                            <p style="margin: 5px 0; font-size: 0.9em; color: #555;"><strong>Contacto:</strong> ${data.clinicPhone || 'N/A'} | ${data.clinicEmail || 'N/A'}</p>
                            <p style="margin: 5px 0; font-size: 0.9em; color: #555;"><strong>Fecha:</strong> ${data.assessmentDate || 'N/A'}</p>
                        </div>
                    </div>

                    <!-- T√≠tulo -->
                    <h2 style="text-align: center; font-size: 2.2em; color: #D81B60; font-family: 'Montserrat', sans-serif; margin-bottom: 30px; text-transform: uppercase;">Reporte Cl√≠nico Podol√≥gico</h2>

                    <!-- Datos del Paciente -->
                    <div style="margin-bottom: 25px; border: 1px solid #E0E0E0; border-radius: 10px; padding: 20px; background-color: #F5F5F5;">
                        <h3 style="font-size: 1.4em; color: #2C2C2C; margin-top: 0; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 1px dashed #9E9E9E; font-weight: 700;">Datos del Paciente</h3>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Nombre:</strong> ${data.patientName || 'N/A'}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Edad:</strong> ${data.patientAge || 'N/A'} a√±os</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Sexo:</strong> ${data.patientSex || 'N/A'}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Domicilio:</strong> ${data.patientAddress || 'N/A'}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Ocupaci√≥n:</strong> ${data.patientOccupation || 'N/A'}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Tel√©fono:</strong> ${data.patientPhone || 'N/A'}</p>
                    </div>

                    <!-- Antecedentes -->
                    <div style="margin-bottom: 25px; border: 1px solid #E0E0E0; border-radius: 10px; padding: 20px; background-color: #F5F5F5;">
                        <h3 style="font-size: 1.4em; color: #2C2C2C; margin-top: 0; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 1px dashed #9E9E9E; font-weight: 700;">Antecedentes Podol√≥gicos y M√©dicos</h3>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Condiciones Relevantes:</strong> ${formatCheckboxValues(data.podiatricHistory)}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Tratamiento Actual:</strong> ${data.currentTreatment || 'N/A'}</p>
                    </div>

                    <!-- Estilo de Vida -->
                    <div style="margin-bottom: 25px; border: 1px solid #E0E0E0; border-radius: 10px; padding: 20px; background-color: #F5F5F5;">
                        <h3 style="font-size: 1.4em; color: #2C2C2C; margin-top: 0; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 1px dashed #9E9E9E; font-weight: 700;">Estilo de Vida y H√°bitos</h3>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Actividad F√≠sica:</strong> ${data.physicalActivity || 'N/A'}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Tipo de Calzado:</strong> ${data.usualFootwear || 'N/A'}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Frecuencia de Caminata:</strong> ${data.dailyWalkFrequency || 'N/A'}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>H√°bitos T√≥xicos:</strong> ${formatCheckboxValues(data.toxicologicalHabits)}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Nivel de Estr√©s:</strong> ${data.stressLevel || 'N/A'}/10</p>
                    </div>

                    <!-- Exploraci√≥n Cl√≠nica -->
                    <div style="margin-bottom: 25px; border: 1px solid #E0E0E0; border-radius: 10px; padding: 20px; background-color: #F5F5F5;">
                        <h3 style="font-size: 1.4em; color: #2C2C2C; margin-top: 0; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 1px dashed #9E9E9E; font-weight: 700;">Exploraci√≥n Cl√≠nica Podol√≥gica</h3>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>U√±as:</strong> ${formatCheckboxValues(data.nailEvaluation)}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Piel y Tegumentos:</strong> ${formatCheckboxValues(data.skinEvaluation)}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Marcha y Postura:</strong> ${data.gaitEvaluation || 'Normal'}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Pulsos:</strong> ${data.vascularPulses || 'N/A'}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Llenado Capilar:</strong> ${data.capillaryRefill || 'N/A'}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Temperatura:</strong> ${data.footTemperature || 'N/A'}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Exploraci√≥n Neurol√≥gica:</strong> ${data.neurologicalEvaluation || 'N/A'}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Lado(s) Afectado(s):</strong> ${data.affectedSide || 'N/A'}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Observaciones:</strong> ${data.clinicalObservations || 'Sin observaciones adicionales.'}</p>
                    </div>

                    <!-- Plan de Tratamiento -->
                    <div style="margin-bottom: 25px; border: 1px solid #E0E0E0; border-radius: 10px; padding: 20px; background-color: #F5F5F5;">
                        <h3 style="font-size: 1.4em; color: #2C2C2C; margin-top: 0; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 1px dashed #9E9E9E; font-weight: 700;">Plan de Tratamiento Sugerido</h3>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Higiene del Pie:</strong> ${data.hygieneIndications || 'N/A'}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Cuidado de U√±as:</strong> ${data.nailCare || 'N/A'}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Tratamientos Antimic√≥ticos:</strong> ${data.antifungalTreatments || 'No aplica'}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>√ìrtesis/Calzado:</strong> ${data.orthoticsIndications || 'No aplica'}</p>
                        <p style="margin: 8px 0; font-size: 0.95em;"><strong>Seguimiento:</strong> ${data.podiatricFollowUp || 'N/A'}</p>
                    </div>

                    <!-- Fotograf√≠a Cl√≠nica -->
                    <div style="margin-bottom: 25px; border: 1px solid #E0E0E0; border-radius: 10px; padding: 20px; background-color: #F5F5F5;">
                        <h3 style="font-size: 1.4em; color: #2C2C2C; margin-top: 0; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 1px dashed #9E9E9E; font-weight: 700;">Fotograf√≠a Cl√≠nica</h3>
                        <div style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; margin-top: 15px;">
                            ${imagesHTML}
                        </div>
                        <p style="margin: 15px 0 0 0; font-size: 0.95em;"><strong>Comentarios:</strong> ${data.imageObservations || 'Sin comentarios sobre las fotograf√≠as.'}</p>
                    </div>

                    <!-- Consentimiento -->
                    <div style="margin-bottom: 25px; border: 1px solid #E0E0E0; border-radius: 10px; padding: 20px; background-color: #F5F5F5;">
                        <h3 style="font-size: 1.4em; color: #2C2C2C; margin-top: 0; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 1px dashed #9E9E9E; font-weight: 700;">Consentimiento Informado</h3>
                        <p style="white-space: pre-wrap; margin-top: 10px; padding: 10px; border: 1px dashed #E0E0E0; border-radius: 5px; font-size: 0.9em; line-height: 2; font-weight: 700;">${data.consentText || 'No se ingres√≥ texto del consentimiento.'}</p>
                        <p style="margin: 15px 0 0 0; font-size: 0.95em;"><strong>Aceptaci√≥n:</strong> ${data.consent ? '‚úÖ Aceptado' : '‚ùå No Aceptado'}</p>
                    </div>

                    <!-- Firmas -->
                    <div style="display: flex; justify-content: space-around; margin-top: 40px; padding-top: 20px; border-top: 1px dashed #9E9E9E;">
                        <div style="text-align: center; flex: 1; padding: 0 15px;">
                            <img src="${patientSignaturePad.toDataURL()}" style="max-width: 200px; height: auto; border-bottom: 2px solid #2C2C2C; margin-bottom: 10px;" alt="Firma Paciente">
                            <p style="margin: 0; font-size: 0.9em; font-weight: 600;">Firma del ${data.patientName || 'Paciente'}</p>
                        </div>
                        <div style="text-align: center; flex: 1; padding: 0 15px;">
                            <img src="${professionalSignaturePad.toDataURL()}" style="max-width: 200px; height: auto; border-bottom: 2px solid #2C2C2C; margin-bottom: 10px;" alt="Firma Profesional">
                            <p style="margin: 0; font-size: 0.9em; font-weight: 600;">Firma del ${data.specialistName || 'Especialista'}</p>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #E0E0E0; text-align: center; color: #9E9E9E; font-size: 0.85em;">
                        <p style="margin: 5px 0;">Documento generado con Podolog√≠APP</p>
                        <p style="margin: 5px 0;">Fecha de generaci√≥n: ${new Date().toLocaleDateString('es-ES')}</p>
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html>